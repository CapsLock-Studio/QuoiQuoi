// Generated by CoffeeScript 1.6.3
$(document).on('page:change', function() {
  var touch;
  setScrollable();
  setAutoSize();
  setMaxLength();
  setValidateForm();
  $('.selectpicker').selectpicker();
  $(".box .box-remove").on("click", function(e) {
    $(this).parents(".box").first().remove();
    e.preventDefault();
    return false;
  });
  $(".box .box-collapse").on("click", function(e) {
    var box;
    box = $(this).parents(".box").first();
    box.toggleClass("box-collapsed");
    e.preventDefault();
    return false;
  });
  if (jQuery().pwstrength) {
    $('.pwstrength').pwstrength({
      showVerdicts: false
    });
  }
  $(".check-all").on("click", function(e) {
    return $(this).parents("table:eq(0)").find(".only-checkbox :checkbox").attr("checked", this.checked);
  });
  if (jQuery().tabdrop) {
    $('.nav-responsive.nav-pills, .nav-responsive.nav-tabs').tabdrop();
  }
  if (jQuery().wysihtml5) {
    $('.wysihtml5').wysihtml5();
  }
  if (jQuery().nestable) {
    $('.dd-nestable').nestable();
  }
  if (!$("body").hasClass("fixed-header")) {
    if (jQuery().affix) {
      $('#main-nav.main-nav-fixed').affix({
        offset: 40
      });
    }
  }
  if (jQuery().datetimepicker) {
      $.fn.datetimepicker.defaults = {
          pickDate: true, //en/disables the date picker
          pickTime: true, //en/disables the time picker
          useMinutes: true, //en/disables the minutes picker
          useSeconds: true, //en/disables the seconds picker
          useCurrent: true, //when true, picker will set the value to the current date/time
          minuteStepping: 1, //set the minute stepping
          //minDate: '1/1/2014', //set a minimum date
          //maxDate: '10/10/2014', //set a maximum date (defaults to today +100 years)
          format: 'YYYY/MM/DD',
          showToday: true, //shows the today indicator
          language: 'en', //sets language locale
          defaultDate: "", //sets a default date, accepts js dates, strings and moment objects
          disabledDates: [], //an array of dates that cannot be selected
          enabledDates: [], //an array of dates that can be selected
          icons: {
              time: 'glyphicon glyphicon-time',
              date: 'glyphicon glyphicon-calendar',
              up: 'glyphicon glyphicon-chevron-up',
              down: 'glyphicon glyphicon-chevron-down'
          },
          useStrict: false, //use "strict" when validating dates
          sideBySide: false, //show the date and time picker side by side
          daysOfWeekDisabled: [] //for exam
      };
    $(".datepicker").datetimepicker({
      pickTime: false,
      format: 'YYYY/MM/DD'
    });
  }
  if (jQuery().bootstrapFileInput) {
    $('input[type=file]').bootstrapFileInput();
  }
});

this.setMaxLength = function(selector) {
  if (selector == null) {
    selector = $(".char-max-length");
  }
  if (jQuery().maxlength) {
    return selector.maxlength();
  }
};

this.setAutoSize = function(selector) {
  if (selector == null) {
    selector = $(".autosize");
  }
  if (jQuery().autosize) {
    return selector.autosize();
  }
};

this.setScrollable = function(selector) {
  if (selector == null) {
    selector = $(".scrollable");
  }
  if (jQuery().slimScroll) {
    return selector.each(function(i, elem) {
      return $(elem).slimScroll({
        height: $(elem).data("scrollable-height"),
        start: $(elem).data("scrollable-start") || "top"
      });
    });
  }
};

this.setValidateForm = function(selector) {
  if (selector == null) {
    selector = $(".validate-form");
  }
  if (jQuery().validate) {
    return selector.each(function(i, elem) {
      return $(elem).validate({
        errorElement: "span",
        errorClass: "help-block has-error",
        errorPlacement: function(e, t) {
          return t.parents(".controls").first().append(e);
        },
        highlight: function(e) {
          return $(e).closest('.form-group').removeClass("has-error has-success").addClass('has-error');
        },
        success: function(e) {
          return e.closest(".form-group").removeClass("has-error");
        }
      });
    });
  }
};