var refreshPrice=function(){var e=$("#product-price"),t=parseInt(e.data("price"),10);$("option:selected").each(function(){t+=parseInt($(this).data("price"),10)}),e.text("$"+(t+"").replace(/(\d{1,3})(?=(\d{3})+$)/g,"$1,")+".00")},convertPreview=function(e,t){e.match(/[https|http]+:\/\/www.youtube.com\//)&&$(t).html('<iframe style="width:100%;height:'+$(t).height()+'px;" src="'+e.replace(/[https|http]+:\/\/www\.youtube\.com\/watch\?v=([\w\d]+)/,"//www.youtube.com/embed/$1")+'" frameborder="0" allowfullscreen></iframe>')},bindSelectBox=function(){$(".select-box .box-header").on("click",function(){var e=$(this).parent(".box"),t=$(".material_id_"+$(this).data("material_id"));e.hasClass("active")?(t.remove(),e.removeClass("active")):t.length<=0&&($($("<div></div>").html($(".template").html().replace(/new_nested_item/g,(new Date).getTime())).text()).appendTo(".items").addClass("material_id_"+$(this).data("material_id")).val($(this).data("material_id")),e.addClass("active"))}),$(".select-box-paginate a").on("click",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href").replace("new","material"),type:"GET",dataType:"html",success:function(e){var t=[];$(".select-boxes").html(e),$("input.material_id").each(function(e,a){t.push(parseInt(a.value,10))}),console.log(t),$(".select-box .box-header").each(function(e,a){console.log($(a).data("material_id")),t.indexOf($(a).data("material_id"))>-1&&$(this).parent(".box").addClass("active")}),bindSelectBox()},error:function(){window.alert("\u7121\u6cd5\u8b80\u53d6\u9801\u9762 / Can't load page.")}})})},initChangeFee=function(){$(".shipping-fee").on("change",function(){var e=$(this).find(":selected").data("free-condition"),t=parseInt($(this).find(":selected").data("fee"),10),a=$(".subtotal"),n=$(".shipping-fee-subtotal"),i=parseInt(a.data("price"),10);n.text("$"+(t+"").replace(/(\d{1,3})(?=(\d{3})+$)/g,"$1,")+".00"),a.text("$"+(t+i+"").replace(/(\d{1,3})(?=(\d{3})+$)/g,"$1,")+".00"),null!=e&&i>e&&(n.text("$0.00"),a.text("$"+(i+"").replace(/(\d{1,3})(?=(\d{3})+$)/g,"$1,")+".00"))})},initAsideMenu=function(){$(".aside-menu-switch, #btnHideAsideMenu, .navbar-toggle-aside-menu").on("click",function(e){e.preventDefault(),$(".wrapper").toggleClass("col-md-pull-3 col-sm-pull-10 col-xs-pull-12 right-0"),$("body").toggleClass("aside-menu-in"),$(".aside-menu-switch").toggleClass("active")})},iniCalendarModel=function(){(setDraggableEvents=function(){return $("#events .external-event").each(function(){var e;return e={title:$.trim($(this).text())},$(this).data("eventObject",e),$(this).draggable({zIndex:999,revert:!0,revertDuration:0})})})();var e=$(".full-calendar-demo"),t=e.fullCalendar({header:{center:"title",left:"basicDay,basicWeek,month",right:"prev,today,next"},buttonText:{prev:'<span class="icon-chevron-left"></span>',next:'<span class="icon-chevron-right"></span>',today:"\u4eca\u5929",basicDay:"\u65e5",basicWeek:"\u9031",month:"\u6708"},droppable:!1,editable:!1,selectable:!1,select:function(e,a,n){return bootbox.prompt("Event title",function(i){return null!==i?(t.fullCalendar("renderEvent",{title:i,start:e,end:a,allDay:n},!0),t.fullCalendar("unselect")):void 0})},eventClick:function(){},drop:function(){},events:e.data("url")});return $("#calendar-modal").on("shown.bs.modal",function(){e.fullCalendar("render")}),t};